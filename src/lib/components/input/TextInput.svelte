<script lang="ts">
    import { createEventDispatcher } from 'svelte'

    export let label: string | number | undefined = ''
    export let type: 'text' | 'password' | 'email' | 'number' | 'search' | null | undefined = 'text'
    export let value: string = ''
    export let required = false
    export let placeholder:string = ''

    function typeAction(node: Node) {
        // @ts-ignore
        node.type = type
    }

    const dispatcher = createEventDispatcher()
    
    /*
    let className = `
        ${value.length != 0 ? 'invalid:border-red-400' : ''}
        input-text w-full px-3 text-sm py-2.5 bg-white dark:bg-zinc-950
        border border-slate-300 dark:border-zinc-700 dark:focus:border-white
        focus:outline-none focus:border-black transition-colors rounded-md disabled:bg-slate-200 disabled:border-slate-300 dark:disabled:border-zinc-600 
        dark:disabled:bg-zinc-700 disabled:opacity-70
        ${$$props.class}
    `
    */
    let className =`
        ${value.length != 0 ? 'invalid:border-red-400' : ''}
        form-text text-sm rounded-md shadow-sm px-3 h-8 w-full
        bg-slate-200 text-zinc-900
        dark:bg-zinc-800 dark:text-slate-200
        ${$$props.class}
    `
</script>

<label class="flex flex-col items-center {$$props.class}">
    {#if label != ''}
        <span class="font-bold text-sm text-left mb-1 cursor-pointer w-max self-start">
            {label}
            {#if required}
                <span class="text-red-500">*</span>
            {/if}
        </span>
    {/if}
    
    <input
        use:typeAction
        bind:value
        on:keydown={(e) => dispatcher('keydown', e)}
        on:keyup={(e) => dispatcher('keyup', e)}
        on:input={(e) => dispatcher('input', e)}
        on:change={(e) => dispatcher('change', e)}
        on:focus
        {...$$restProps}
        class={className}
        {required}
        placeholder={placeholder}
    />
</label>
